#include "ScheduleServer.h"
#include "GAScheduleGenerator.hpp"
#include "ScheduleRequestHandler.h"

#include "nlohmann/json.hpp"


int main(int argc, char** argv)
{
//    const std::string& data = R"({"subject_requests":[{"id":77,"professor":86,"complexity":4,"days":[4,5],"groups":[2,5,6,8,9],"classrooms":[[6,9,10,13,15,19,20],[2]]},{"id":36,"professor":120,"complexity":4,"days":[0,2],"groups":[1,5,6],"classrooms":[[9],[1]]},{"id":48,"professor":120,"complexity":4,"days":[0,2],"groups":[1,3,6,8],"classrooms":[[9,10,20],[]]},{"id":62,"professor":120,"complexity":4,"days":[0,2],"groups":[2,5,6,8],"classrooms":[[3,8,11,14,15,17,18,19],[]]},{"id":12,"professor":49,"complexity":4,"days":[1,2,4,3,0],"groups":[1,2,4,9,10],"classrooms":[[6,7,12,14,18],[]]},{"id":17,"professor":49,"complexity":4,"days":[1,2,4,3,0],"groups":[6],"classrooms":[[6,9,10,14,16,18,19],[]]},{"id":26,"professor":49,"complexity":4,"days":[1,2,4,3,0],"groups":[3],"classrooms":[[10,15,18],[1,2]]},{"id":2,"professor":112,"complexity":2,"days":[1,2,0],"groups":[3,7,10],"classrooms":[[4,10,12,15,18,19,20],[2]]},{"id":18,"professor":112,"complexity":2,"days":[1,2,0],"groups":[6],"classrooms":[[6],[]]},{"id":49,"professor":112,"complexity":2,"days":[1,2,0],"groups":[3,6],"classrooms":[[3,8,11,12,16,17],[]]},{"id":89,"professor":112,"complexity":2,"days":[1,2,0],"groups":[2,3,9,10],"classrooms":[[12,13,15,17],[]]},{"id":19,"professor":98,"complexity":4,"days":[5,3,0],"groups":[9,10],"classrooms":[[5,7,10,11,14,18,20],[]]},{"id":54,"professor":98,"complexity":4,"days":[5,3,0],"groups":[1,8,10],"classrooms":[[10],[]]},{"id":74,"professor":2,"complexity":2,"days":[1,5,0,4,3],"groups":[2,4,5],"classrooms":[[16],[]]},{"id":43,"professor":70,"complexity":3,"days":[0,5,4,2,1],"groups":[7,8],"classrooms":[[7,10,16,18],[2]]},{"id":51,"professor":70,"complexity":3,"days":[0,5,4,2,1],"groups":[9],"classrooms":[[5,6,7,11],[]]},{"id":57,"professor":70,"complexity":3,"days":[0,5,4,2,1],"groups":[1,5,9],"classrooms":[[4,14,15,18],[]]},{"id":60,"professor":70,"complexity":3,"days":[0,5,4,2,1],"groups":[3,7,9,10],"classrooms":[[3,6,10,11,12,14,16,20],[]]},{"id":9,"professor":57,"complexity":2,"days":[1,0,3,2,4],"groups":[1,2,6,8,9],"classrooms":[[3,6,7,8,10,11,15],[1]]},{"id":52,"professor":57,"complexity":2,"days":[1,0,3,2,4],"groups":[1,7,8,9],"classrooms":[[],[]]},{"id":76,"professor":57,"complexity":2,"days":[1,0,3,2,4],"groups":[1,2,3,8],"classrooms":[[4,6,7,9,10,11,15,16],[1]]},{"id":30,"professor":23,"complexity":4,"days":[5,0,4,3],"groups":[6,8],"classrooms":[[3,6,7,10,12,20],[1]]},{"id":33,"professor":23,"complexity":4,"days":[5,0,4,3],"groups":[2,5,8],"classrooms":[[9,11,12,16,17,18,19],[1,2]]},{"id":40,"professor":23,"complexity":4,"days":[5,0,4,3],"groups":[1,3,8],"classrooms":[[6,8,12,14],[2]]},{"id":53,"professor":23,"complexity":4,"days":[5,0,4,3],"groups":[4,6,8],"classrooms":[[3,6,8,16,19],[1]]},{"id":86,"professor":23,"complexity":4,"days":[5,0,4,3],"groups":[4,5,9],"classrooms":[[3,7,15,16,19],[2]]},{"id":88,"professor":23,"complexity":4,"days":[5,0,4,3],"groups":[2,3,4,6,9],"classrooms":[[4,6],[]]},{"id":44,"professor":26,"complexity":4,"days":[2,0,4],"groups":[7],"classrooms":[[3,7,8,9,11,13,15,16,19],[1]]},{"id":66,"professor":26,"complexity":4,"days":[2,0,4],"groups":[2,7,9],"classrooms":[[9,11,12,13,16,18],[]]},{"id":72,"professor":26,"complexity":4,"days":[2,0,4],"groups":[4,8],"classrooms":[[4,5,8,9,11,13,15,17,18],[]]},{"id":83,"professor":26,"complexity":4,"days":[2,0,4],"groups":[2,9],"classrooms":[[9,12,19],[]]},{"id":20,"professor":88,"complexity":4,"days":[0,1,2,5,4],"groups":[3,8,9],"classrooms":[[],[]]},{"id":41,"professor":88,"complexity":4,"days":[0,1,2,5,4],"groups":[4,8,9],"classrooms":[[6,7,8,14,19],[]]},{"id":84,"professor":88,"complexity":4,"days":[0,1,2,5,4],"groups":[5,9],"classrooms":[[3,7,8,10,14,15,16,19,20],[]]},{"id":70,"professor":2,"complexity":4,"days":[0,3],"groups":[1,6],"classrooms":[[],[]]},{"id":80,"professor":2,"complexity":4,"days":[0,3],"groups":[4],"classrooms":[[3,5,10,13,15,16],[1]]},{"id":7,"professor":30,"complexity":2,"days":[3],"groups":[6,9],"classrooms":[[4,9,16,19],[]]},{"id":22,"professor":30,"complexity":2,"days":[3],"groups":[3,4,8,9],"classrooms":[[5,19],[]]},{"id":28,"professor":30,"complexity":2,"days":[3],"groups":[4,6,8],"classrooms":[[5,6,10,14,16,20],[]]},{"id":31,"professor":30,"complexity":2,"days":[3],"groups":[1,2,6,8],"classrooms":[[6,7,12],[1]]},{"id":38,"professor":30,"complexity":2,"days":[3],"groups":[2,3,6,7,8],"classrooms":[[14],[]]},{"id":78,"professor":30,"complexity":2,"days":[3],"groups":[1,3],"classrooms":[[11,16],[]]},{"id":8,"professor":13,"complexity":1,"days":[3,1],"groups":[3,4,8,9,10],"classrooms":[[4,6,13,19,20],[]]},{"id":35,"professor":13,"complexity":1,"days":[3,1],"groups":[6,10],"classrooms":[[8],[1,2]]},{"id":47,"professor":13,"complexity":1,"days":[3,1],"groups":[2,7,10],"classrooms":[[3,5,7,9,12,14,18,19],[]]},{"id":63,"professor":13,"complexity":1,"days":[3,1],"groups":[1,3,8,9,10],"classrooms":[[7,11,18,20],[]]},{"id":65,"professor":13,"complexity":1,"days":[3,1],"groups":[1,6,9],"classrooms":[[5,8,10,11,16,17,18,19],[2]]},{"id":29,"professor":94,"complexity":4,"days":[4,0,2,3,1],"groups":[1,3,6,10],"classrooms":[[12,17],[]]},{"id":81,"professor":94,"complexity":4,"days":[4,0,2,3,1],"groups":[2,3,4,8,9],"classrooms":[[3],[]]},{"id":21,"professor":107,"complexity":3,"days":[3,0],"groups":[3,6,7,8,10],"classrooms":[[7,8,9,16,19],[]]},{"id":14,"professor":10,"complexity":4,"days":[1,3],"groups":[1,4,5,7],"classrooms":[[6,9],[]]},{"id":15,"professor":10,"complexity":4,"days":[1,3],"groups":[9],"classrooms":[[],[]]},{"id":32,"professor":10,"complexity":4,"days":[1,3],"groups":[9],"classrooms":[[9,19,20],[2]]},{"id":45,"professor":10,"complexity":4,"days":[1,3],"groups":[2,3,8],"classrooms":[[3,4,5,6,7],[1]]},{"id":58,"professor":10,"complexity":4,"days":[1,3],"groups":[2,3,6,8],"classrooms":[[7,8,9,11,14,16,17,18,19],[]]},{"id":67,"professor":10,"complexity":4,"days":[1,3],"groups":[9],"classrooms":[[],[]]},{"id":23,"professor":33,"complexity":3,"days":[3,5,4,0,2],"groups":[2,3,4,8],"classrooms":[[6,11,12,13,16,18],[1,2]]},{"id":24,"professor":33,"complexity":3,"days":[3,5,4,0,2],"groups":[4],"classrooms":[[5,6,10,11,12,13,14,15,20],[2]]},{"id":6,"professor":48,"complexity":4,"days":[5,0,1,4],"groups":[1,2,3,4,8],"classrooms":[[],[]]},{"id":25,"professor":48,"complexity":4,"days":[5,0,1,4],"groups":[1,3,7],"classrooms":[[4,5,6,9,10,11,14,17,18],[2]]},{"id":34,"professor":48,"complexity":4,"days":[5,0,1,4],"groups":[8],"classrooms":[[4,6,9,13,14,15,19],[2]]},{"id":39,"professor":48,"complexity":4,"days":[5,0,1,4],"groups":[3,7,9],"classrooms":[[7,9,14],[]]},{"id":69,"professor":48,"complexity":4,"days":[5,0,1,4],"groups":[1,2,3,4],"classrooms":[[5,6,9,10,11,14,15,18],[2]]},{"id":85,"professor":48,"complexity":4,"days":[5,0,1,4],"groups":[4,6],"classrooms":[[3,4,9,15],[1]]},{"id":16,"professor":75,"complexity":4,"days":[1],"groups":[2,6],"classrooms":[[],[2]]},{"id":55,"professor":75,"complexity":4,"days":[1],"groups":[3,5,6,7,9],"classrooms":[[4,10,17,18,20],[]]},{"id":56,"professor":75,"complexity":4,"days":[1],"groups":[6],"classrooms":[[4,6,10,12,13,17],[]]},{"id":61,"professor":75,"complexity":4,"days":[1],"groups":[4,9],"classrooms":[[7,11,18,19],[1]]},{"id":4,"professor":75,"complexity":3,"days":[4,3,2,0],"groups":[1,4],"classrooms":[[6,8,10,12,13,19],[]]},{"id":1,"professor":104,"complexity":3,"days":[1,0],"groups":[1,2,6],"classrooms":[[4,10,11,13,14,20],[]]},{"id":3,"professor":104,"complexity":3,"days":[1,0],"groups":[3,5,6,10],"classrooms":[[8,14,15,16],[2]]},{"id":37,"professor":104,"complexity":3,"days":[1,0],"groups":[2],"classrooms":[[10,11,13,18],[]]},{"id":64,"professor":104,"complexity":3,"days":[1,0],"groups":[4],"classrooms":[[3,4,6,7,8,15,17],[2]]},{"id":90,"professor":104,"complexity":3,"days":[1,0],"groups":[4,8,9],"classrooms":[[4,9,12,15,18,19,20],[1,2]]},{"id":75,"professor":76,"complexity":3,"days":[3,5],"groups":[1,2,10],"classrooms":[[4,6,10,11,14,15,16,19,20],[1]]},{"id":10,"professor":101,"complexity":2,"days":[5],"groups":[1,3,5,7,8],"classrooms":[[3,5,8,12,15,18,19,20],[1,2]]},{"id":50,"professor":101,"complexity":2,"days":[5],"groups":[2,3,5,8,9],"classrooms":[[4,5,6,7,10,14,17,18],[]]},{"id":68,"professor":101,"complexity":2,"days":[5],"groups":[1,3,8,10],"classrooms":[[12,13,20],[]]},{"id":87,"professor":101,"complexity":2,"days":[5],"groups":[1,4,5,7,8],"classrooms":[[3,9,17,19],[]]},{"id":11,"professor":68,"complexity":3,"days":[4,5,1,0],"groups":[1,4,7,9,10],"classrooms":[[6,10,12,13,17],[1]]},{"id":73,"professor":68,"complexity":3,"days":[4,5,1,0],"groups":[1,4,6,8,10],"classrooms":[[12],[]]},{"id":27,"professor":160,"complexity":1,"days":[4,3,5,2,1],"groups":[5,9],"classrooms":[[4,5,7,11,12,14,16,17,18,19],[]]},{"id":46,"professor":160,"complexity":1,"days":[4,3,5,2,1],"groups":[3,4,6],"classrooms":[[7,13,20],[]]},{"id":71,"professor":160,"complexity":1,"days":[4,3,5,2,1],"groups":[3],"classrooms":[[4,6,7,8,10,11,12,14,16],[]]},{"id":82,"professor":160,"complexity":1,"days":[4,3,5,2,1],"groups":[2,8],"classrooms":[[6,8,9,13,15,18],[]]},{"id":5,"professor":165,"complexity":2,"days":[5,3,1],"groups":[2],"classrooms":[[10,12,16],[1]]},{"id":59,"professor":165,"complexity":2,"days":[5,3,1],"groups":[2,4,5,8,9],"classrooms":[[6,8,9,10,11,20],[1,2]]},{"id":13,"professor":64,"complexity":1,"days":[4,5,3,1],"groups":[1,4,8],"classrooms":[[6,7,20],[1]]},{"id":42,"professor":64,"complexity":1,"days":[4,5,3,1],"groups":[2,4,6],"classrooms":[[3,9,11,15,17,19],[1]]},{"id":79,"professor":64,"complexity":1,"days":[4,5,3,1],"groups":[1,3,7,9],"classrooms":[[9,12,13],[]]}],"locked_lessons":[]})";
//    GAScheduleGenerator generator;
//    generator.Generate(ParseScheduleData(nlohmann::json::parse(data)));

    ScheduleServer app;
    return app.run(argc, argv);
}
